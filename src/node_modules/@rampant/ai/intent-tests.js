/* eslint-disable no-console */
import { start, importProject, deleteProject } from '@rampant/ai'
import { white, underline } from 'chalk'
import serial from '@rampant/serial-promise'
import { testCount, projectSettings } from '@rampant/ai/test-intents.js'

const projectId = 'testing'

const createIntents = () => {
    console.log()
    console.log(`  ${white(underline('Intent Tests'))}`)
    console.log()

    return importProject(projectId, projectSettings).then(() =>
        start({ projectId })
    )
}

const cleanup = () => {
    console.log()
    console.log(white.bold(`    ${testCount} tests run`))
    console.log()

    return deleteProject(projectId)
}

serial([createIntents, cleanup], 2000).then(() => process.exit(0))
